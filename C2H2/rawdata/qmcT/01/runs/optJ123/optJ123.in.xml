<?xml version="1.0"?>
<simulation>
   <project id="optJ123" series="0">
      <application name="qmcpack" role="molecu" class="serial" version="1.0"/>
   </project>
   <qmcsystem>
      <simulationcell>
         <parameter name="bconds">
            n n n
         </parameter>
      </simulationcell>
      <particleset name="ion0" size="4">
         <attrib name="ionid" datatype="stringArray">
            C C H H
         </attrib>
         <attrib name="position" datatype="posArray" condition="0">
                  0.00000000        0.00000000        1.13629232
                  0.00000000        0.00000000       -1.13629232
                  0.00000000        0.00000000        3.14526016
                  0.00000000        0.00000000       -3.14526016
         </attrib>
         <group name="C">
            <parameter name="charge"              >    4                     </parameter>
            <parameter name="valence"             >    4                     </parameter>
            <parameter name="atomicnumber"        >    6                     </parameter>
         </group>
         <group name="H">
            <parameter name="charge"              >    1                     </parameter>
            <parameter name="valence"             >    1                     </parameter>
            <parameter name="atomicnumber"        >    1                     </parameter>
         </group>
      </particleset>
      <particleset name="e" random="yes" randomsrc="ion0">
         <group name="u" size="5">
            <parameter name="charge"              >    -1                    </parameter>
         </group>
         <group name="d" size="5">
            <parameter name="charge"              >    -1                    </parameter>
         </group>
      </particleset>
      <wavefunction name="psi0" target="e">
         <determinantset type="MolecularOrbital" href="../scf/scf.h5" source="ion0" transform="yes" name="LCAOBSet">
            <slaterdeterminant>
               <determinant id="updet" size="5">
                  <occupation mode="ground">                                                     </occupation>
                  <coefficient size="250" spindataset="0">                                                     </coefficient>
               </determinant>
               <determinant id="downdet" size="5">
                  <occupation mode="ground">                                                     </occupation>
                  <coefficient size="250" spindataset="0">                                                     </coefficient>
               </determinant>
            </slaterdeterminant>
         </determinantset>
         <jastrow type="One-Body" name="J1" function="bspline" source="ion0" print="yes">
            <correlation elementType="C" size="10" rcut="5.0" cusp="0.0">
               <coefficients id="eC" type="Array">                  
-1.001081876 -0.9438136242 -0.835508813 -0.6928627891 -0.5408567318 -0.4032694281 
-0.2783722121 -0.1751326714 -0.09804343678 -0.04027798041
               </coefficients>
            </correlation>
            <correlation elementType="H" size="10" rcut="5.0" cusp="0.0">
               <coefficients id="eH" type="Array">                  
-0.1796417946 -0.1583161452 -0.1307043006 -0.1096062214 -0.08610128926 
-0.06131268899 -0.03921945396 -0.01805759604 -0.003887294851 0.0003622402851 
               </coefficients>
            </correlation>
         </jastrow>
         <jastrow type="Two-Body" name="J2" function="bspline" print="yes">
            <correlation speciesA="u" speciesB="u" size="10" rcut="5.0">
               <coefficients id="uu" type="Array">                  
0.464188809 0.3744259959 0.2821245893 0.2146793294 0.1561120154 0.1110847846 
0.07524508019 0.04771510166 0.02852092905 0.01767440404
               </coefficients>
            </correlation>
            <correlation speciesA="u" speciesB="d" size="10" rcut="5.0">
               <coefficients id="ud" type="Array">                  
0.75543662 0.5666832159 0.4239136933 0.3137423725 0.231016817 0.1681246047 
0.119025625 0.0798223522 0.04757330909 0.0244302615
               </coefficients>
            </correlation>
         </jastrow>
         <jastrow type="eeI" name="J3" function="polynomial" print="yes" source="ion0">
            <correlation ispecies="C" especies1="u" especies2="u" isize="3" esize="3" rcut="5.0">
               <coefficients id="uuC" type="Array" optimize="yes"/>
            </correlation>
            <correlation ispecies="C" especies1="u" especies2="d" isize="3" esize="3" rcut="5.0">
               <coefficients id="udC" type="Array" optimize="yes"/>
            </correlation>
            <correlation ispecies="H" especies1="u" especies2="u" isize="3" esize="3" rcut="5.0">
               <coefficients id="uuH" type="Array" optimize="yes"/>
            </correlation>
            <correlation ispecies="H" especies1="u" especies2="d" isize="3" esize="3" rcut="5.0">
               <coefficients id="udH" type="Array" optimize="yes"/>
            </correlation>
         </jastrow>
      </wavefunction>
      <hamiltonian name="h0" type="generic" target="e">
         <pairpot type="coulomb" name="ElecElec" source="e" target="e"/>
         <pairpot type="coulomb" name="IonIon" source="ion0" target="ion0"/>
         <pairpot type="pseudo" name="PseudoPot" source="ion0" wavefunction="psi0" format="xml">
            <pseudo elementType="C" href="C.ccECP.xml"/>
            <pseudo elementType="H" href="H.ccECP.xml"/>
         </pairpot>
      </hamiltonian>
   </qmcsystem>
   <loop max="3">
      <qmc method="linear" move="pbyp" checkpoint="-1">
         <cost name="energy"              >    0.9                </cost>
         <cost name="unreweightedvariance">    0.0                </cost>
         <cost name="reweightedvariance"  >    0.1                </cost>
         <parameter name="blocks"              >    100                </parameter>
         <parameter name="steps"               >    20                 </parameter>
         <parameter name="subSteps"            >    2                  </parameter>
         <parameter name="timestep"            >    1.5                </parameter>
         <parameter name="useDrift"            >    yes                </parameter>
         <parameter name="samples"             >    32000              </parameter>
         <parameter name="MinMethod"           >    OneShiftOnly         </parameter>
         <parameter name="minwalkers"          >    0.85               </parameter>
         <parameter name="nonlocalpp"          >    yes                </parameter>
      </qmc>
   </loop>
</simulation>
